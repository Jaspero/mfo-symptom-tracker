<div class="decorator"></div>

<section>
  <mat-card>
    <form [formGroup]="form">

      <img class="logo" src="assets/logo.svg" alt="Logo" />

      <h2 class="m-b-m">Simptom Traker | Registracija</h2>

      <mat-form-field class="w-full">
        <mat-label>Istraživanje</mat-label>
        <mat-select formControlName="research">
          <mat-option *ngFor="let research of researches" [value]="research.id">
            {{research.name}}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field class="w-full">
        <mat-label>Identifikator</mat-label>
        <input autofocus matInput formControlName="id"/>
        <span matPrefix class="p-x-s" *ngIf="research.value">{{prefixes[research.value]}}-</span>
      </mat-form-field>

      <ng-container formGroupName="pg">
        <mat-form-field class="w-full">
          <mat-label>Lozinka</mat-label>
          <input type="password" matInput formControlName="password">
          <mat-error class="m-b-s">Lozinka mora imati najmanje 6 znakova.</mat-error>
        </mat-form-field>

        <mat-form-field class="w-full">
          <mat-label>Ponovi Lozinku</mat-label>
          <input type="password" matInput formControlName="repeatPassword">
        </mat-form-field>

        <mat-error *ngIf="form.get('pg.password').dirty && form.get('pg.repeatPassword').dirty && form.get('pg').hasError('equal')">
          {{form.get('pg').getError('equal')}}
        </mat-error>
      </ng-container>

      <div class="m-t-s">
        <button
          mat-stroked-button
          color="primary"
          [disabled]="form.invalid"
          [jpLoadClick]="register()">
          Registracija
        </button>

        <p class="m-t-m">Imate račun? <a class="link" routerLink="/login">Prijavite se</a></p>
      </div>
    </form>
  </mat-card>
</section>
